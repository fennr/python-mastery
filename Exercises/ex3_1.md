\[ [Index](index.md) | [Exercise 2.6](ex2_6.md) | [Exercise 3.2](ex3_2.md) \]

# Упражнение 3.1

*Задачи:*

- Определить простой класс

*Изменяемые файлы:* `stock.py`

В [Упражнении 1.5](ex1_5.md), ты определил простой класс `Stock` для 
владения акциями. В этом упражнении мы просто добавим к этому 
классу несколько функций, а также напишем некоторые вспомогательные функции.

## (a) Добавление нового метода

Добавь новый метод `sell(nshares)` в класс Stock, который продает 
определенное количество акций, уменьшая количество акций. 
Пусть он работает следующим образом:

```python
>>> s = Stock('GOOG',100,490.10)
>>> s.shares
100
>>> s.sell(25)
>>> s.shares
75
>>>
```

## (b) Чтение портфеля

Добавь функцию `read_portfolio()` в `stock.py` которая читает файл 
с данными портфеля и создает список объектов `Stock`. 
Вот как это должно работать:

```python
>>> portfolio = read_portfolio('Data/portfolio.csv')
>>> for s in portfolio:
        print(s)

<__main__.Stock object at 0x3902f0>
<__main__.Stock object at 0x390270>
<__main__.Stock object at 0x390330>
<__main__.Stock object at 0x390370>
<__main__.Stock object at 0x3903b0>
<__main__.Stock object at 0x3903f0>
<__main__.Stock object at 0x390430>
>>>
```

Ты уже написал похожую функцию в [Упражнении 2.3](ex2_3.md).  
Обсуждение дизайна: должна ли `read_portfolio()` быть отдельной функцией 
или быть частью определения класса?

## (c) Вывод таблицы

Отобрази данные, прочитанные в `(b)`, в виде красиво отформатированной таблицы. Например:

```python
>>> portfolio = read_portfolio('Data/portfolio.csv')
>>> for s in portfolio:
           print('%10s %10d %10.2f' % (s.name, s.shares, s.price))

        AA        100      32.20
       IBM         50      91.10
       CAT        150      83.44
      MSFT        200      51.23
        GE         95      40.37
      MSFT         50      65.10
       IBM        100      70.44
>>>
```

Возьми этот код и помести его в функцию `print_portfolio()`, которая создаст 
такой же вывод, но также добавит заголовки таблицы. Например:

```python
>>> portfolio = read_portfolio('Data/portfolio.csv')
>>> print_portfolio(portfolio)
      name     shares      price
---------- ---------- ---------- 
        AA        100      32.20
       IBM         50      91.10
       CAT        150      83.44
      MSFT        200      51.23
        GE         95      40.37
      MSFT         50      65.10
       IBM        100      70.44
>>>
```

\[ [Solution](soln3_1.md) | [Index](index.md) | [Exercise 2.6](ex2_6.md) | [Exercise 3.2](ex3_2.md) \]

----
`>>>` Advanced Python Mastery  
`...` A course by [dabeaz](https://www.dabeaz.com)  
`...` Copyright 2007-2023  

![](https://i.creativecommons.org/l/by-sa/4.0/88x31.png). This work is licensed under a [Creative Commons Attribution-ShareAlike 4.0 International License](http://creativecommons.org/licenses/by-sa/4.0/)
